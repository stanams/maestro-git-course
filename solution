US1

ETQU qui a réalisé mon login à partir d’un autre navigateur ou d’un navigateur privé
Je veux voir apparaître une page me demandant d’envoyer un code SMS
Afin de valider mon authentification 2 facteurs et me garantir la sécurité de mon compte

-----------------------------
ACCEPTANCE TESTS

GIVEN je suis sur la page d’envoie du code SMS
WHEN je clique sur le bouton envoyer le code et que tout se passe bien
THEN je vois s’afficher un message de confirmation d’envoie et je reçois un SMS

GIVEN je suis sur la page d’envoie du code SMS
WHEN je clique sur le bouton envoyer le code et qu’il y a un problème
THEN je vois s’afficher un message d’erreur m’invitant à rappuyer sur le CTA d’envoi et je ne reçois pas de SMS

GIVEN je suis sur la page d’envoie du code SMS
WHEN je clique sur le bouton envoyer le code (problème ou pas)
THEN je fais partir un hit de tracking indiquant le succès ou l'erreur de cette action


=========================================

US2 (ici j'ai pris le cas où il y a un bouton "Valider" pour envoyer mes 6 chiffres. Dans le cas leboncoin présenté en cours, l'envoie du code reçu par SMS
se fait automatiquement lorsqu'on a saisi les 6 chiffres)

ETQU qui a demandé avec succès l’envoi d’un code SMS de vérification
Je veux voir apparaître un input me permettant de valider mon code
Afin de confirmer mon identité 2 facteurs

------------------------------------------
ACCEPTANCE TESTS

GIVEN j’ai bien reçu le code SMS
WHEN je remplis les 6 chiffres mon code SMS
THEN je peux appuyer sur le bouton « Valider »

GIVEN j’ai bien reçu le code SMS
WHEN je rempli moins de 6 chiffres mon code SMS
THEN je ne peux pas appuyer sur le bouton « Valider » qui reste grisé

GIVEN j’ai bien reçu le code SMS
WHEN je rempli les 6 bons chiffres de mon code SMS et appuye sur le bouton « Valider »
THEN je parviens à me connecter suis redirigé sur la page permettant de retenir le navigateur ou pas

GIVEN j’ai bien reçu le code SMS
WHEN je rempli un mauvais code à 6 chiffres
THEN je vois un message d’erreur m’indiquant que le code est mauvais est que je dois le resaisir

GIVEN j’ai bien reçu le code SMS
WHEN je rempli un bon code à 6 chiffres qui est en erreur
THEN je vois un message d’erreur m’indiquant de rééssayer de saisir mon code et un bouton pour me renvoyer un nouveau code

=========================================
US3

ETQU qui a bien validé mon code
Je veux pouvoir choisir si je retiens ce navigateur ou pas
Afin de ne pas avoir à nnouveau ce parcours fastidieux sur mes prochaines connexions avec ce navigateur

------------------------------------------
ACCEPTANCE TESTS

GIVEN j'ai réussi à valider mon code
WHEN je click sur "Retenir mon navigateur"
THEN je suis redirigé sur la home page en tant qu'utilisateur loggué
AND si je reessaye de me login sur ce navigateur, alors je n'ai pas de parcours 2FA

GIVEN j'ai réussi à valider mon code
WHEN je click sur "Plus tard"
THEN je suis redirigé sur la home page en tant qu'utilisateur loggué
AND si je reessaye de me login sur ce navigateur, alors je repasse par le parcours 2FA
